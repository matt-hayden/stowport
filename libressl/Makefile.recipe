STOWDEST ?= /usr/local/stow/libressl

SUDO = sudo

.PHONY: debian-dep centos-dep config


#debian-dep:
#	$(SUDO) apt-get install -y cmake ninja-build
centos-dep:
	$(SUDO) yum install -y perl-podlators # cmake ninja-build 

SRC:
	[ -d $@ ] || git submodule add git://github.com/libressl-portable/portable.git $@
config: SRC
	cd $^ && sh autogen.sh --prefix=$(STOWDEST)
	sh $^/configure --prefix=$(STOWDEST) --sysconfdir=/etc \
		--enable-nc --with-openssldir=/etc/ssl
	$(MULTIMAKE) -C SRC check
#build: config
#	mkdir build
#	cd build && cmake -G"Ninja" -DCMAKE_INSTALL_PREFIX=$(STOWDEST) ../SRC
#	cd build && ninja && ninja test
