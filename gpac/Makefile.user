STOWDEST ?= /usr/local/stow/ffmpeg/


debian-dep:
	sudo apt-get install -y \
		libssl-dev libxmlrpc-core-c3-dev libwxgtk3.0-dev \
		libjpeg-dev libpng12-dev libfreetype6-dev \
		libasound2-dev libmozjs185-dev zlib1g-dev \
		libxv-dev libxvidcore-dev libopenjpeg-dev liba52-0.7.4-dev libfaad-dev \
		libogg-dev libvorbis-dev libtheora-dev libpulse-dev
#fedora-dep:
#	sudo dnf install -y yasm-devel


gpac:
	git submodule add git://github.com/gpac/$@.git
update: gpac
	git submodule update --init
config: update
	chmod +x gpac/configure
	sh gpac/configure \
		--prefix=$(STOWDEST) --mandir=$(STOWDEST)/share/man \
		--enable-pic

post-install:
	- mkdir -p $(STOWDEST)/include
	[ -d $(STOWDEST)/include ] && cp -R include/gpac $(STOWDEST)/include
